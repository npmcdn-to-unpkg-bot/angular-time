"use strict";timeApp.controller("EditGridCtrl",["$scope","$cookies","loginService","toastr","$location",function e(t,o,n,r,i){t.selects=["Time","Interval"],t.selection=t.selects[0],t.user={login:o.get("userLogin")},t.cityList=[{name:"Moscow",gmt:3},{name:"London",gmt:0},{name:"Paris",gmt:1}],t.logout=function(){n.logout()},t.addCity=function(e){void 0!==e&&""!==e&&(t.cityList.splice(0,0,{name:t.newCity}),t.newCity="")},t.checkAuthShow=function(){return"/404"==i.path()?!0:void 0!=o.get("token")?!1:!0},t.checkAuthHide=function(){return"/404"==i.path()?!1:void 0!=o.get("token")?!1:!0},t.errorHide=function(){return"/404"==i.path()?!0:!1}}]),timeApp.controller("GridCtrl",["$scope",function(e){e.remove=function(t){var o=e.cityList.indexOf(t);e.cityList.splice(o,1)}}]),timeApp.controller("SignInCtrl",["$scope","loginService","toastr",function(e,t,o){e.signIn=function(e){t.login(e)}}]),timeApp.controller("SignUpCtrl",["$scope","loginService","toastr",function(e,t,o){e.signUp=function(o){o.password==e.confirmPassword?(t.signup(o),t.login(o)):e.errorMessage="Passwords doesn't match"}}]),timeApp.controller("TimeCtrl",["$scope","$stateParams","$filter","$timeout",function(e,t,o,n){e.clock="loading clock...",e.tickInterval=1e3,e.dayHours=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23];var r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];e.selectedHour;var s,c,u,a,l,g=function(){var t=new Date,o=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds());c=o.getMinutes(),s=o.getHours(),u=o.getDate(),a=r[o.getMonth()],l=i[o.getDay()],e.date=a+", "+l+" "+u,n(g,e.tickInterval)};e.selectedHour=s,e.getHour=function(t,o){var n=t+o.gmt;return t===s?e.varNow="now":e.varNow="",n>23?n-24:n},e.setNowArea=function(t){t===s?e.varActive="active":e.varActive=""},e.setSelectedHour=function(t){e.selectedHour=t},e.funcTime=function(t){var o,n,r;return angular.forEach(e.cityList,function(e,i){e.name===t.name&&(o=s+e.gmt,o>24&&(o-=24),n=c),10>n&&(n="0"+c),10>o&&(o="0"+s),r=o+":"+n}),5===r.length?r:"loading clock..."},n(g,[e.tickInterval])}]),timeApp.controller("ProfileCtrl",["$scope","$stateParams","$cookies","loginService","toastr",function(e,t,o,n,r){e.eventProfile="Edit",e.user={id:o.get("userId"),login:o.get("userLogin"),email:o.get("userEmail"),token:o.get("token")},e.deleteAccountFunc=function(){n.deleteUser(o.get("userId"))},e.editFunc=function(){if("Edit"==e.eventProfile)e.eventProfile="Save";else{var t=n.getUser(o.get("userId"));t.then(function(t){var i=t.data;if(void 0!=e.user.login&&void 0!=e.user.email&&void 0!=e.user.password)if(e.user.login!=i.login||e.user.email!=i.email||e.user.password!=i.password){var s=n.editUser(e.user);s.success(function(){r.success("Your information saved."),e.eventProfile="Edit",o.put("userLogin",e.user.login),o.put("userEmail",e.user.email)}).error(function(){r.error("Ð¡ouldn't be saved to the server.")})}else r.info("Your data isn't changed."),e.eventProfile="Edit";else r.error("All parameters are required.")})}}}]);